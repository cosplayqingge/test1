<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>010.手风琴.html</title>
    <style>
    *{
        margin: 0;
        padding: 0;
}
ul,li{
    list-style: none;
}
.box{
    width: 1246px;
    height: 310px;
    margin: 100px auto;
    overflow: hidden;
}
.accordion li{
    float: left;
    width: 249.2px;
    height: 310px;
    color: #000;
    font-size: 20px;
}
</style>
</head>
<body>
<div class="box">
    <ul class="accordion">
        <li><img src="qingge8.png" alt=""></li>
        <li><img src="qingge9.png" alt=""></li>
        <li><img src="qingge10.png" alt=""></li>
        <li><img src="qingge11.png" alt=""></li>
        <li><img src="qingge12.png" alt=""></li>
    </ul>
    </div>
    <script>
        function accordion(){
            var oBox = document.querySelector(".box");
            var accordion = oBox.querySelector(".accordion");
            var oList = accordion.getElementsByTagName("li");
            var i = 0;
            var timer = null;
            //console.log(oList.length);
            for(var i=0;i<oList.length;i++){
                oList[i].index = i;
                oList[i].onmouseover = function(){
                    var index = this.index;
                    if(timer){
                        clearInterval(timer);
                    }
                    timer = setInterval(function(){
                        var iWidth = oBox.offsetWidth;  //盒子的总宽度
                        //console.log(iWidth); 1050
                        for(var i=0;i<oList.length;i++){
                            if( index != oList[i].index ){
                                //设定速度
                                var speed = ( 100 - oList[i].offsetWidth) / 5;
                                speed = speed > 0 ? Math.ceil(speed):Math.floor(speed);
                                oList[i].style.width = oList[i].offsetWidth + speed + "px";
                                iWidth -= oList[i].offsetWidth;
                            }
                            oList[index].style.width = iWidth + "px";
                        }
                    },30);
                }
            }
        }
        accordion();
    </script>
</body>
</html>