<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>022.promise的图片加载.html</title>
</head>
<body>
	
</body>
<script>
	// let img = new Image();

	// img.onload = function(){
	// 	console.log('img/xg.jpg' + 'loaded....')
	// }
	// img.onerror = function(){
	// 	console.log('img/xg.jpg'+'loaded failad')
	// }

	// img.src='img/xg.jpg'


	// function loadImg(url,success,error){//success成功时回调,error失败时回调
	// 	img.onload = function(){
	// 		console.log('img/xg.jpg' + 'loaded....')
	// 	}
	// 	img.onerror = function(){
	// 		console.log('img/xg.jpg'+'loaded failad')
	// 	}
	// 	img.src = url;
	// }
	// //成功和失败都要接受参数url
	// loadImg('img/xg.jpg',function(url){
	// 	console.log(url + 'loaded....')
	// },function(url){
	// 	console.log(url+'loaded failad')
	// })
	// loadImg('img/qg.jpg',function(url){
	// 	console.log(url + 'loaded????')
	// },function(url){
	// 	console.log(url+'loaded failad')
	// })


	// let promise = new Promise((resolve,reject)=>{
	// 	img.onload = function(){
	// 		resolve('img/xg.jpg')
	// 	}
	// 	img.onerror = function(){
	// 		reject('img/xg.jpg')
	// 	}
	// 	img.src = 'img/xg.jpg'
	// })
	// promise
	// .then(url=>{
	// 	console.log(url + 'loaded....')
	// },err=>{
	// 	console.log(url+'loaded failad')
	// })

	let getLoadImgPromise = (url)=>{
		return new Promise((resolve,reject)=>{
			var img = new Image();
			img.onload = function(){
				resolve(url)
			}
			img.onerror = function(){
				reject(url)
			}
			img.src = url
		})
	}
	getLoadImgPromise('img/xg.jpg')//会返回一个promise对象
	.then(url=>{
		console.log(url + 'loaded....')
	},url=>{
		console.log(url+'loaded failad')
	})

</script>
</html>